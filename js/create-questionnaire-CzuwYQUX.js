import{d as A,L as G,E as d,U as y,r as c,k as i,l as p,s as t,t as s,w as a,N as f,V as H,W as J,G as z,H as U,q as g,p as k,X as O,Y as W,n as X,J as L}from"./index-B44FbHz5.js";import{_ as Y}from"./question.vue_vue_type_script_setup_true_lang-V2cW3Nyw.js";const P={class:"w-full h-full p-4 box-border flex flex-col gap-4"},Q={class:"w-full"},Z={class:"w-full h-0 flex-1"},ee={class:"w-full h-full box-border bg-fill-1"},le={class:"w-full h-full overflow-y-auto"},oe={class:"w-full h-full overflow-y-auto box-border p-4 flex flex-col gap-4"},te={class:"w-full flex gap-4 justify-between"},ne=t("i",{class:"iconfont icon-chexiao"},null,-1),ae=t("i",{class:"iconfont icon-yulan"},null,-1),se={class:"w-full h-0 flex flex-col flex-1 gap-4"},ue=t("p",{class:"text-md font-bold"},"标题：",-1),ie={class:"w-full"},re=t("p",{class:"text-md font-bold"},"基础组件:",-1),de={class:"w-full flex flex-wrap"},ce=["onClick"],pe={class:"text-xs"},fe={key:0,class:"w-full h-0 flex flex-col flex-1 gap-4"},ve=t("p",{class:"text-md font-bold"},"字段名称:",-1),me={class:"w-full"},_e=t("p",{class:"text-md font-bold"},"占位文本:",-1),he={class:"w-full"},xe=t("p",{class:"text-md font-bold"},"是否必填:",-1),be={class:"w-full"},we={key:0,class:"text-md font-bold"},ye={key:1,class:"w-full flex flex-wrap gap-4"},ge=t("i",{class:"iconfont icon-tianjia1"},null,-1),Ie=A({__name:"create-questionnaire",setup(ke){const R=G(),C=d(.35),V=y(()=>u.value!==-1),n=d([]),h=d("问卷"),N=d([{type:"Input",name:"输入框",icon:"icon-duohangshurukuang"},{type:"Number",name:"计数器",icon:"icon-jishuqi"},{type:"Textarea",name:"多行输入框",icon:"icon-duohangshurukuang1"},{type:"Radio",name:"单选框",icon:"icon-danxuankuang"},{type:"Checkbox",name:"多选框",icon:"icon-duoxuankuang"},{type:"Select",name:"单选选择器",icon:"icon-xuanzeqi1"},{type:"Multiple",name:"多选选择器",icon:"icon-xuanzeqi"},{type:"Rate",name:"评分",icon:"icon-pingfen"}]),r=d(null),u=y(()=>r.value?n.value.findIndex(l=>l.id===r.value):-1),B=y(()=>{var e;if(!r.value)return[];const l=n.value.findIndex(m=>m.id===r.value);return((e=n.value[l])==null?void 0:e.options)??[]}),v=d(""),x=d(null),b=d(!1),q=()=>{v.value&&(n.value[u.value].options.push(v.value),v.value=""),b.value=!1},S=l=>{n.value[u.value].options.splice(l,1)};function $(){b.value=!0,W(()=>{x.value&&x.value.focus()})}function j(l){const e=Math.random().toString(16).slice(2);if(l==="Input")return{id:e,type:l.toLowerCase(),label:"问题",required:!0,value:"",placeholder:"描述"};if(l==="Textarea")return{id:e,type:l.toLowerCase(),label:"问题",required:!0,value:"",placeholder:"描述"};if(l==="Number")return{id:e,type:l.toLowerCase(),label:"问题",required:!0,value:0,placeholder:"描述"};if(l==="Rate")return{id:e,type:l.toLowerCase(),label:"问题",required:!0,value:0};if(l==="Radio")return{id:e,type:l.toLowerCase(),label:"问题",required:!0,value:"",options:["选项1","选项2"],placeholder:"描述"};if(["Select","Checkbox","Multiple"].includes(l))return{id:e,type:l.toLowerCase(),label:"问题",required:!0,value:[],options:["选项1","选项2"],placeholder:"描述"}}function F(l){n.value.push(j(l))}function M(){const l=R.resolve({path:"/preview"});window.open(l.href,"_blank")}return(l,e)=>{const m=c("a-breadcrumb-item"),T=c("a-breadcrumb"),w=c("a-button"),_=c("a-input"),E=c("a-switch"),D=c("a-tag"),K=c("a-split");return i(),p("div",P,[t("div",Q,[s(T,null,{default:a(()=>[s(m,null,{default:a(()=>[f("问卷中心")]),_:1}),s(m,null,{default:a(()=>[f("反馈")]),_:1}),s(m,null,{default:a(()=>[f("新增")]),_:1})]),_:1})]),t("div",Z,[s(K,{style:{height:"100%",width:"100%",border:"1px solid var(--color-border)"},size:C.value,"onUpdate:size":e[8]||(e[8]=o=>C.value=o),min:"300px"},{first:a(()=>[t("div",ee,[t("div",le,[s(Y,{title:h.value,form:n.value,"onUpdate:form":e[0]||(e[0]=o=>n.value=o),setting:"",settingId:r.value,"onUpdate:settingId":e[1]||(e[1]=o=>r.value=o)},null,8,["title","form","settingId"])])])]),second:a(()=>[t("div",oe,[t("div",te,[s(w,{type:"primary",disabled:!r.value,onClick:e[2]||(e[2]=o=>r.value=null)},{icon:a(()=>[ne]),_:1},8,["disabled"]),s(w,{type:"primary",onClick:M},{icon:a(()=>[ae]),_:1})]),H(t("div",se,[ue,t("div",ie,[s(_,{modelValue:h.value,"onUpdate:modelValue":e[3]||(e[3]=o=>h.value=o)},null,8,["modelValue"])]),re,t("div",de,[(i(!0),p(z,null,U(N.value,o=>(i(),p("div",{class:"flex flex-col gap-2 w-20 p-2 items-center hover:bg-primary-5 hover:text-white cursor-pointer select-none",onClick:I=>F(o.type)},[t("i",{class:X(["iconfont",o.icon])},null,2),t("span",pe,L(o.name),1)],8,ce))),256))])],512),[[J,!V.value]]),V.value?(i(),p("div",fe,[ve,t("div",me,[s(_,{modelValue:n.value[u.value].label,"onUpdate:modelValue":e[4]||(e[4]=o=>n.value[u.value].label=o),placeholder:"请输入字段名称"},null,8,["modelValue"])]),_e,t("div",he,[s(_,{modelValue:n.value[u.value].placeholder,"onUpdate:modelValue":e[5]||(e[5]=o=>n.value[u.value].placeholder=o),placeholder:"请输入占位文本"},null,8,["modelValue"])]),xe,t("div",be,[s(E,{modelValue:n.value[u.value].required,"onUpdate:modelValue":e[6]||(e[6]=o=>n.value[u.value].required=o)},{checked:a(()=>[f(" 是 ")]),unchecked:a(()=>[f(" 否 ")]),_:1},8,["modelValue"])]),["select","checkbox","multiple","rate","radio"].includes(n.value[u.value].type)?(i(),p("p",we,"选项:")):g("",!0),["select","checkbox","multiple","rate","radio"].includes(n.value[u.value].type)?(i(),p("div",ye,[(i(!0),p(z,null,U(B.value,(o,I)=>(i(),k(D,{key:o,color:"rgb(var(--primary-6))",closable:"",onClose:Ce=>S(I)},{default:a(()=>[f(L(o),1)]),_:2},1032,["onClose"]))),128)),b.value?(i(),k(_,{key:0,ref_key:"inputRef",ref:x,style:{width:"90px"},size:"mini",modelValue:v.value,"onUpdate:modelValue":e[7]||(e[7]=o=>v.value=o),modelModifiers:{trim:!0},onKeyup:O(q,["enter"]),onBlur:q},null,8,["modelValue"])):(i(),k(w,{key:1,size:"mini",onClick:$,type:"primary"},{icon:a(()=>[ge]),default:a(()=>[f(" 添加 ")]),_:1}))])):g("",!0)])):g("",!0)])]),_:1},8,["size"])])])}}});export{Ie as default};
